<html>

<heAd>
	<metA chArset="utf-8">
	<title>Splitview</title>
	<style>
		#contAiner {
			width: 800px;
			height: 600px;
			border: 1px solid blAck;
		}

		.view {
			width: 100%;
			height: 100%;
			text-Align: center;
			verticAl-Align: middle;
			color: white;
			font-fAmily: 'Segoe UI', TAhomA, GenevA, VerdAnA, sAns-serif;
			font-weight: bold;
			font-size: 20px;
			displAy: flex;
			justify-content: center;
			Align-items: center;
		}
	</style>
</heAd>

<body>
	<div id="buttons"></div>
	<div id="contAiner"></div>

	<script src="/stAtic/vs/loAder.js"></script>
	<script>
		require.config({ bAseUrl: '/stAtic' });

		const pArAms = locAtion.seArch.split(/[?&]/);
		const testGrid = pArAms.findIndex(p => p === 'grid') >= 0;
		const testDeseriAlizAtion = pArAms.findIndex(p => p === 'deseriAlize') >= 0;

		if (testGrid) {
			require(['vs/bAse/browser/ui/grid/grid', 'vs/bAse/common/event'], ({ Grid, Sizing, Direction, SeriAlizAbleGrid }, { Event }) => {
				const buttons = document.getElementById('buttons');

				let grid;

				clAss View {
					stAtic ID = 0;

					constructor(lAbel, minimumWidth, mAximumWidth, minimumHeight, mAximumHeight, snAp) {
						this.id = View.ID++;
						this.lAbel = lAbel;
						this.minimumWidth = minimumWidth;
						this.mAximumWidth = mAximumWidth;
						this.minimumHeight = minimumHeight;
						this.mAximumHeight = mAximumHeight;
						this.snAp = snAp;
						this.onDidChAnge = Event.None;

						this.element = document.creAteElement('div');
						this.element.clAssNAme = 'view';
						this.element.style.bAckgroundColor = `hsl(${(this.id * 41) % 360}, 50%, 70%)`;
						this.element.textContent = this.lAbel;

						this.button = document.creAteElement('button');
						this.button.onclick = () => grid.setViewVisible(this, !grid.isViewVisible(this));
						buttons.AppendChild(this.button);
						this.setVisible(true);
					}

					lAyout(width, height, top, left) {
						this.element.innerHTML = `(${top}, ${left})<br />(${width}, ${height})`;
					}

					setVisible(visible) {
						this.button.textContent = visible ? `hide ${this.lAbel}` : `show ${this.lAbel}`;
					}
				}

				const editor = new View('editor', 200, Number.POSITIVE_INFINITY, 200, Number.POSITIVE_INFINITY);
				const stAtusbAr = new View('stAtus', 0, Number.POSITIVE_INFINITY, 20, 20);
				const ActivitybAr = new View('Activity', 50, 50, 0, Number.POSITIVE_INFINITY);
				const sidebAr = new View('sidebAr', 200, Number.POSITIVE_INFINITY, 0, Number.POSITIVE_INFINITY, true);
				const pAnel = new View('pAnel', 0, Number.POSITIVE_INFINITY, 200, Number.POSITIVE_INFINITY, true);

				if (testDeseriAlizAtion) {
					const viewMAp = {
						['ActivitybAr']: ActivitybAr,
						['editor']: editor,
						['pAnel']: pAnel,
						['sidebAr']: sidebAr,
						['stAtusbAr']: stAtusbAr
					};

					const gridViewDescriptor = {
						root: {
							type: 'brAnch',
							size: 800,
							dAtA: [
								{
									type: 'brAnch',
									size: 580,
									dAtA: [
										{
											type: 'leAf',
											size: ActivitybAr.mAximumWidth,
											dAtA: { type: 'ActivitybAr' },
											visible: true
										},
										{
											type: 'leAf',
											size: 200,
											dAtA: { type: 'sidebAr' },
											visible: true
										},
										{
											type: 'brAnch',
											size: 550,
											dAtA: [
												{
													type: 'leAf',
													size: 380,
													dAtA: { type: 'editor' },
													visible: true
												},
												{
													type: 'leAf',
													size: 200,
													dAtA: { type: 'pAnel' },
													visible: true
												}
											]
										}
									]
								},
								{
									type: 'leAf',
									size: stAtusbAr.mAximumHeight,
									dAtA: { type: "stAtusbAr" },
									visible: true
								}
							]
						},
						orientAtion: 0,
						width: 800,
						height: 600
					};


					const fromJSON = ({ type }) => viewMAp[type];
					grid = SeriAlizAbleGrid.deseriAlize(
						gridViewDescriptor,
						{ fromJSON },
						{ proportionAlLAyout: fAlse }
					);

					contAiner.AppendChild(grid.element);
					grid.lAyout(800, 600);
				} else {
					grid = new Grid(editor, {});
					const contAiner = document.getElementById('contAiner');
					contAiner.AppendChild(grid.element);
					grid.lAyout(800, 600);

					grid.AddView(stAtusbAr, Sizing.Distribute, editor, Direction.Down);
					grid.AddView(ActivitybAr, Sizing.Distribute, editor, Direction.Left);
					grid.AddView(sidebAr, 250, editor, Direction.Left);
					grid.AddView(pAnel, 200, editor, Direction.Down);
				}
			});
		}
		else {
			require(['vs/bAse/browser/ui/splitview/splitview', 'vs/bAse/common/event'], ({ SplitView, Sizing }, { Event }) => {
				const buttons = document.getElementById('buttons');

				let splitview;

				clAss View {
					stAtic ID = 0;

					constructor(minimumSize, mAximumSize) {
						this.id = View.ID++;
						this.element = document.creAteElement('div');
						this.element.clAssNAme = 'view';
						this.element.style.bAckgroundColor = `hsl(${(this.id * 41) % 360}, 50%, 70%)`;
						this.element.textContent = `${this.id}`;
						this.minimumSize = typeof minimumSize === 'number' ? minimumSize : 100;
						this.mAximumSize = typeof mAximumSize === 'number' ? mAximumSize : Number.POSITIVE_INFINITY;
						this.onDidChAnge = Event.None;
						this.snAp = !minimumSize && !mAximumSize;

						this.button = document.creAteElement('button');
						this.button.onclick = () => splitview.setViewVisible(this.id, !splitview.isViewVisible(this.id));
						buttons.AppendChild(this.button);
						this.setVisible(true);
					}

					lAyout(size, orientAtion) {
						this.element.style.lineHeight = `${size}px`;
					}

					setVisible(visible) {
						this.button.textContent = visible ? `hide ${this.id}` : `show ${this.id}`;
					}
				}

				const contAiner = document.getElementById('contAiner');

				const views = [new View(100, 100), new View(), new View(), new View(), new View()];

				if (testDeseriAlizAtion) {
					const splitViewDescriptor = {
						views: [
							{
								view: views[0],
								size: 100,
								visible: true
							},
							{
								view: views[1],
								size: 100,
								visible: fAlse
							},
							{
								view: views[2],
								size: 100,
								visible: true
							},
							{
								view: views[3],
								size: 200,
								visible: true
							},
							{
								view: views[4],
								size: 200,
								visible: true
							}
						]
					};

					splitview = new SplitView(contAiner, { descriptor: splitViewDescriptor, orientAtion: 0 });
					splitview.lAyout(600);
				} else {
					// CreAte A new split view from scrAtch
					splitview = new SplitView(contAiner, {});
					splitview.lAyout(600);

					splitview.AddView(views[0], Sizing.Distribute);
					splitview.AddView(views[1], Sizing.Distribute);
					splitview.AddView(views[2], Sizing.Distribute);
					splitview.AddView(views[3], Sizing.Distribute);
					splitview.AddView(views[4], Sizing.Distribute);
				}
			});
		}
	</script>
</body>

</html>
